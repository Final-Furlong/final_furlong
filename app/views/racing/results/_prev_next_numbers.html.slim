/# locals: (date:, number:)
ruby:
  if number == 1
    prev_date = Racing::RaceResult.where(date: ...date).maximum(:date)
    unless prev_date.blank?
      prev_number = Racing::RaceResult.where(date: prev_date).maximum(:number)
      prev_text = "#{l(prev_date)} ##{prev_number}"
    end
    next_date = date
    next_number = number + 1
    next_text = "#{l(date)} ##{next_number}"
  elsif number == Racing::RaceResult.where(date: date).maximum(:number)
    prev_date = date
    prev_number = number - 1
    prev_text = "#{l(date)} ##{prev_number}"
    next_date = Racing::RaceResult.where('date > ?', date).minimum(:date)
    next_date ||= Racing::RaceSchedule.where('date > ?', date).minimum(:date)
    next_number = 1
    next_text = "#{l(next_date)} ##{next_number}"
  else
    prev_date = date
    prev_number = number - 1
    prev_text = "#{l(date)} ##{prev_number}"
    next_date = date
    next_number = number + 1
    next_text = "#{l(date)} ##{next_number}"
  end

.w-full.flex.mb-2
  .flex-1
    - unless prev_text.blank?
      = render Ui::ButtonizedLink::Component.new(color: :none, style: :outline, size: :small, url: racing_result_path(prev_date, prev_number), http_method: :get, data: { turbo_frame: "_top" }) do
        = prev_text
  .flex-none
    - result_exists = Racing::RaceResult.exists?(date: next_date, number: next_number)
    = render Ui::ButtonizedLink::Component.new(color: :none, style: :outline, size: :small, disabled: !result_exists, url: racing_result_path(next_date, next_number),
            http_method: :get, data: { turbo_frame: "_top" }) do
      = next_text
